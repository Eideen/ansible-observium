---
ansible_managed: This file is managed by Ansible, all changes will be lost.
#
#pathnames/filesnames
observium_backup_dest: ~/observium.backup.tar.xz
observium_path: /opt/observium
observium_collectd_dir: /var/lib/collectd/rrd
observium_fping: /usr/sbin/fping
observium_email_sendmail_path: /usr/sbin/sendmail

#General
#rpmforge_release: 0.5.3-1.el7 #unused
observium_type: Community # Community or  Subscription
#observium_use_subscription: no
observium_svn_branch: stable
observium_svn_url: http://svn.observium.org/svn/observium/branches
observium_svn_username: ""
observium_svn_password: ""
observium_community_url: http://www.observium.org/observium-community-latest.tar.gz
observium_user: observium
#
observium_web_mouseover: "TRUE"
#
observium_db_name: observium
observium_db_user: observium
observium_db_pass: observium_please_change
observium_db_host: localhost
#
observium_auth_mechanism: mysql
observium_ldap_version: "3"
observium_ldap_server: localhost
observium_ldap_port: 389
observium_ldap_starttls: require
observium_ldap_prefix: "uid="
observium_ldap_suffix: ",ou=People,dc=example,dc=com"
observium_ldap_group: ""
observium_ldap_groupbase: "ou=Group,dc=example,dc=com"
observium_ldap_groupmemberattr: "memberUid"
observium_ldap_emailattr: "mail"
observium_auth_ldap_groups: []
#

apache_group: apache
#
observium_email_default: foo
observium_email_from: "nobody@{{ ansible_domain }}"
observium_email_backend: sendmail

#
observium_poller_threads: 2
#
observium_snmp_version: "v2c"
observium_snmp_timeout: 1
observium_snmp_retries: 5
observium_snmp_max_rep: 10
observium_snmp_communities:
  - public
#
observium_alerts_bgp_whitelist: []
#
observium_ping_timeout: 500
observium_ping_retries: 3

#
observium_rancid_configs: []
observium_rancid_version: 2
#

observium_geocoding_dns: yes
#
observium_directories:
  - { path: "{{ observium_path }}/logs", owner: "{{ observium_user }}", group: "{{ apache_group }}", mode: "0755" }
  - { path: "{{ observium_path }}/rrd", owner: "{{ observium_user }}", group: "{{ apache_group }}", mode: "0755" }

observium_cron_jobs:
  - { name: "Observium rediscovery of all hosts", min: 33, hour: "*/6", job: "{{ observium_path }}/discovery.php -h all > /dev/null 2>&1"}
  - { name: "Observium discovery new hosts", min: "*/5", hour: "*", job: "{{ observium_path }}/discovery.php -h new > /dev/null 2>&1"}
  - { name: "Observium poller", min: "*/5", hour: "*", job: "{{ observium_path }}/poller-wrapper.py > /dev/null 2>&1"}
  - { name: "Observium clean up of sys-, event- and alert-log", min: 13, hour: 5, job: "{{ observium_path }}/housekeeping.php -ysel >> /dev/null 2>&1"}
  - { name: "Observium clean up of urrds, ports, orphaned entries in the database and performance data", min: 47, hour: 4, job: "{{ observium_path }}/housekeeping.php -yrptb >> /dev/null 2>&1"}
  - { name: "backup of Observium logs, rrdfiles, and config to {{ observium_backup_dest }}", min: 13, hour: "*/3", job: "cd {{ observium_path }}; tar -I \"pxz -1\" -cf {{ observium_backup_dest }} logs/ rrd/ config.php > /dev/null 2&>1; chmod 600 {{ observium_backup_dest }}"}


### rrdcached ###
rrdcached_demon: /usr/bin/rrdcached
rrdcached_socket: /var/run/rrdcached.sock
rrdcached_journal: /var/lib/rrdcached/journal/
rrdcached_pidfile: /var/run/rrdcached.pid
rrdcached_basefolder: "{{ observium_path }}/rrd"
rrdcached_wtimeout: 1800
rrdcached_Wjitter: 1800
rrdcached_Wjthreads: 4
rrdcached_delay: 1800
rrdcached_ftimeout: 3600

#### smokeping  ###
#plasse to store RRD file, when using RRDCached it can only be one parant folder.
smokeping_config_dir: /etc/smokeping/config.d
smokeping_datadir: "{{ rrdcached_basefolder }}/smokeping"

#
#https://oss.oetiker.ch/smokeping/doc/smokeping_config.en.html

#owner (mandatory setting) Name of the person responsible for this smokeping installation.
smokeping_owner: "{{ ansible_env.USER }}"
#contact (mandatory setting) Mail address of the person responsible for this smokeping installation.
smokeping_owner_email: "{{ ansible_env.USER }}@{{ ansible_domain }}"

#syslogfacility The syslog facility to use, eg. local0...local7. Note: syslog logging is only used if you specify this.
smokeping_syslogfacility: local1
#The syslog priority to use, eg. debug, notice or info. Default is info.
smokeping_syslogpriority: info

smokeping_ping_interval: 0.01 #time between any host, in seconds

smokeping_ping_hostinterval: 1 #time between same host, in seconds

#Email to Alert Group
smokeping_email_to: "smokepingAlert@{{ ansible_domain }}"
smokeping_email_from: "smokeping@{{ ansible_domain }}"

observium_cron_jobs_smokeping:
  - "1  */6 * * *  root  {{ observium_path }}/scripts/generate-smokeping.php > /etc/smokeping/target2 && service smokeping restart"

smokeping_templates:
  - { src: Presentation.j2, dest: "{{ smokeping_config_dir }}/Presentation",  mode: "0644" }
  - { src: Alerts.j2, dest: "{{ smokeping_config_dir }}/Alerts",  mode: "0644" }
  - { src: Probes.j2, dest: "{{ smokeping_config_dir }}/Probes",  mode: "0644" }
  - { src: General.j2, dest: "{{ smokeping_config_dir }}/General",  mode: "0644" }

smokeping_regxp:
  - { path: "{{ smokeping_config_dir }}/pathnames", regxp: "datadir  =",  line: "datadir  = {{ smokeping_datadir }}" }
  - { path: "/etc/smokeping/config", regxp: "^@include {{ smokeping_config_dir }}/Targets2",  line: "@include {{ smokeping_config_dir }}/Targets2" }
